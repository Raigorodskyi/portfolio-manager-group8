<div class="dashboard-container">
  <div class="dashboard-header">
    <div class="header-top">
      <h1><a href="#">My Portfolio</a></h1>
      <nav>
        <a routerLink="/stocks">Stocks</a>
        <a routerLink="/bonds" class="active">Bonds</a>
        <a routerLink="/profile">Profile</a>
        <a href="#">Overview</a>
      </nav>
    </div>
    <div class="portfolio-values">
      <div class="value-box">
        <h3>Portfolio Value: ${{ this.globalValue }}</h3>
      </div>
      <div class="value-box">
        <h3>Net Bonds Valuation: ${{ this.bondValuation }}</h3>
      </div>
    </div>
  </div>

  <div class="dashboard-grid">
    <div class="your-bonds-box">
      <h2>Your Bonds</h2>
      <table>
        <thead>
          <tr>
            <th>Bond Name</th>
            <th>Bond Ticker</th>
            <th>Purchase Price</th>
            <th>Bond Yield</th>
            <th>Current Market Price</th>
            <th>Number of Bonds</th>
            <th>Difference</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let bond of bonds">
            <td>{{ bond["Bond Name"] }}</td>
            <td>{{ bond["Bond Ticker"] }}</td>
            <td>{{ bond["Purchase Price per Bond"] | currency }}</td>
            <td>{{ bond["Bond Yield (%)"] }}</td>
            <td>
              {{ bond["Current Market Price (from YFinance)"] | currency }}
            </td>
            <td>{{ bond["Number of Bonds"] }}</td>
            <td>
              <span
                [ngClass]="getBondDiff(bond) >= 0 ? 'gain' : 'loss'"
                class="gain-loss-cell"
              >
                {{ getBondDiff(bond) | currency }}
                <span class="material-symbols-outlined">
                  {{ getBondDiff(bond) >= 0 ? "trending_up" : "trending_down" }}
                </span>
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="other-bonds-box">
      <h2>View Other Bonds</h2>
      <div class="bond-search">
        <input
          type="text"
          [(ngModel)]="searchQuery"
          placeholder="Search by ticker or name"
        />
        <button (click)="this.getMarketBond()">Search</button>
      </div>
      <table>
        <thead>
          <tr>
            <th>Ticker</th>
            <th>Name</th>
            <th>Current Price</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let bond of marketBond">
            <td>{{ bond.ticker }}</td>
            <td>{{ bond.data.bond_name }}</td>
            <td>{{ bond.data.current_price | currency }}</td>
            <button>Buy</button>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
